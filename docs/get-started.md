# Get Started

CSS Modules Kit consists of the following three tools:

- ts-plugin ([`@css-modules-kit/ts-plugin`](../packages/ts-plugin/README.md))
- codegen ([`@css-modules-kit/codegen`](../packages/codegen/README.md))
- linter-plugin ([`@css-modules-kit/stylelint-plugin`](../packages/stylelint-plugin/README.md) or [`@css-modules-kit/eslint-plugin`](../packages/eslint-plugin/README.md))

Each tool is independent and can be used on its own. However, using all three together provides a better developer experience. At minimum, we recommend installing both ts-plugin and codegen.

This guide explains each tool and how to set it up.

## Install ts-plugin

ts-plugin is a TypeScript Language Service Plugin for CSS Modules. Installing ts-plugin enables various language features (see [Supported Language Features](#supported-language-features)).

Installation steps differ depending on your editor. Follow the setup guide below:

- [Installation](../packages/ts-plugin/README.md#installation)

## Install codegen

ts-plugin provides type definitions like `{ foo: string, bar: string }` for `styles`. However, ts-plugin only affects the behavior of the TypeScript Language Server (tsserver). It does not affect `tsc`. Therefore, while `styles` will have the type `{ foo: string, bar: string }` during type checking in the editor, this is not the case for type checking in the terminal.

To achieve the expected type checking in the terminal, `.module.css.d.ts` files are required. codegen is a tool that generates these files.

To install codegen, run the following command:

```bash
npm i -D @css-modules-kit/codegen
```

Configure npm-scripts to run the `cmk` command before building and type checking. Optionally, configure the `cmk --watch` command for debug builds.

```json
{
  "scripts": {
    "generate": "cmk",
    "build": "run-s -c generate build:*",
    "build:vite": "vite build",
    "dev": "run-p dev:*",
    "dev:cmk": "cmk --watch",
    "dev:vite": "vite",
    "lint": "run-s -c generate lint:*",
    "lint:eslint": "eslint .",
    "lint:tsc": "tsc --noEmit"
  }
}
```

By default, `*.module.css.d.ts` files are generated within the `generated` directory. The destination directory can be changed by setting the [`cmkOptions.dtsOutDir`](../README.md#cmkoptionsdtsoutdir) option.

## Configure `tsconfig.json`

To enable tsserver and `tsc` to load type definitions generated by CSS Modules Kit, you need to set up `tsconfig.json`.

- Set the [`cmkOptions.enabled`](../README.md#cmkoptionsenabled) option to `true`
- Make sure the [`include`](https://www.typescriptlang.org/tsconfig/#include) option includes `*.module.css` files
  - ✅ Good cases:
    - Omit `include` (equivalent to `["**/*"]`)
    - `["src"]` (equivalent to `["src/**/*"]`)
    - `["src/**/*"]`
  - ❌ Bad cases:
    - `["src/**/*.ts"]`
    - `["src/index.ts"]`
- Set the [`rootDirs`](https://www.typescriptlang.org/tsconfig/#rootDirs) option to include both the directory containing `tsconfig.json` and the `generated` directory.
  - Example: `[".", "generated"]`

Below is an example configuration:

```jsonc
{
  "compilerOptions": {
    "rootDirs": [".", "generated"],
    // ...
  },
  "cmkOptions": {
    "enabled": true,
  },
}
```

## Install linter-plugin

The linter-plugin is a linter plugin for `*.module.css` files. Currently, we support the following linters:

- [stylelint-plugin](../packages/stylelint-plugin/README.md)
- [eslint-plugin](../packages/eslint-plugin/README.md)

All linter plugins provide the same set of rules—choose and install whichever you prefer. For installation instructions, refer to their README files.

## Customization (Optional)

The behavior of ts-plugin and codegen can be customized using the `cmkOptions` option in `tsconfig.json`. For details, see [Configuration](../README.md#configuration).
